{% extends 'main/base.html' %}

{% load crispy_forms_tags %}
{% load humanize %}

{% block content %}
<h2>{{ session }}
    <span>
        <a  class="btn btn-link pull-right" href="{% url 'meet:session:manage' session.meet.id session.id %}">Manage</a>
    </span>
</h2>
<div class="row" id="infobox">
    <div class="col-4">
        <div style="overflow-y:auto; max-height: 30rem;">
            {% if athletes_list %}
                {% for athlete in session.sorted_athlete_set %}
                    <div class="card bg-light mb-3" style="max-width: 18rem;">
                        <div class="card-header">
                            <a class="btn btn-link btn-sm" data-toggle="collapse" href="#info-{{athlete.pk}}">
                                {{athlete}}
                            </a>
                        </div>
                        <div class="card-body">
                        <h5 class="card-title">{{ athlete.get_next_lift }}</h5>
                        <p class="card-text">{{athlete.next_attempt | ordinal}} attempt</p>
                        </div>
                    </div>
                {% endfor %}
            {% endif %}
            </div>
            <a href="#Foo" class="btn btn-default" data-toggle="collapse">Toggle Foo</a>

    </div>

    <div class="col-8" id="info-{{athlete.pk}}">
        {% for athlete in session.sorted_athlete_set %}
        <div id="info-{{athlete.pk}}" class="collapse" style="transition: none !important;" data-parent="#infobox">
            <h4>{{ athlete }}</h4>
            <table class="table text-center">
                <thead>
                    <tr>
                        <th class="text-center" style="width:50%" colspan="3">Snatch</th>
                        <th class="text-center" style="width:50%" colspan="3">Clean and Jerk</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Attempt Weight -->
                    <tr>
                        {% for lift in athlete.lift_set.all %}
                                <td style="width:16.6666666667%">{{ lift }}</td style="width:16.6666666667%">
                        {% endfor %}         
                    </tr>
                    <!-- Attempt Updates -->
                    <tr>
                        {% for lift in athlete.lift_set.all %}
                                <td style="width:16.6666666667%"><span class="text-secondary">#</span>{{ lift.changes }}/3</td style="width:16.6666666667%">
                        {% endfor %}
                    </tr>
                <tbody>
            </table>
        </div>
        {% endfor %}
    </div>
    
</div>
    

{% endblock %}